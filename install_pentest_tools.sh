#!/bin/bash
# ================================ VARIABLES ================================
GO_TOOLS=(
    "github.com/OJ/gobuster/v3@latest"
    "github.com/ffuf/ffuf/v2@latest"
    "github.com/projectdiscovery/nuclei/v3/cmd/nuclei@latest"
    "github.com/projectdiscovery/httpx/cmd/httpx@latest"
    "github.com/projectdiscovery/naabu/v2/cmd/naabu@latest"
    "github.com/projectdiscovery/subfinder/v2/cmd/subfinder@latest"
    "github.com/projectdiscovery/shuffledns/cmd/shuffledns@latest"
)

# ================================ FUNCTIONS ================================
# ================================ INSTALL FUNCTIONS ================================

# Function to install pentest tools
install_pentest_tools() {
    show_info "Installing pentest tools..."
    # check if os is supported
    if ! is_supported_os $OS; then
        show_error "Unsupported OS"
        exit 1
    fi

    # Install Go-based tools
    # TODO: Install Go-based tools
    for go_tool in "${GO_TOOLS[@]}"; do
        install_go_library $go_tool
    done
    

    # Install Rust-based tools
    # TODO: Install Rust-based tools

    # Install Python-based tools
    # TODO: Install Python-based tools
}

# Main function
main() {
    # Install common tools first (includes Go and Rust)
    source ./common.sh

    # Install pentest tools
    install_pentest_tools

    # Source .zshrc to apply changes
    show_info "Applying changes to current shell..."
    if [ -n "$ZSH_VERSION" ]; then
        source ~/.zshrc
    else
        show_info "Please run 'zsh' to apply all changes"
    fi
}

# Run the main function
main
